trigger: none
pr: none

pool:
  vmImage: ubuntu-latest

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.x'
    addToPath: true
    architecture: 'x64'

- script: |
    set -eux  # fail on error
    pip install exdown 
    pip install presidio-analyzer
    pip install presidio-anonymizer
    pip install presidio-image-redactor 
  
- script: |
    jupyter nbconvert --to notebook --execute --ExecutePreprocessor.timeout=60 --output out_file ./docs/samples/python/presidio_notebook.ipynb

- task: PythonScript@0
  displayName: 'Test python code in markdown files'
  inputs:
    scriptSource: 'filePath'
    scriptPath: './.pipelines/templates/test-md.py'